数据库的索引分为主键索引（Primary Inkex）与普通索引（Secondary Index）。InnoDB和MyISAM是怎么利用B+树来实现这两类索引，其又有什么差异呢？

**一、MyISAM的索引**

MyISAM的索引与行记录是分开存储的，叫做非聚集索引（UnClustered Index）

其主键索引与普通索引没有本质差异：

* 有连续聚集的区域单独存储行记录
* 主键索引的叶子节点，存储主键，与对应行记录的指针
* 普通索引的叶子结点，存储索引列，与对应行记录的指针

主键索引与普通索引是两棵独立的索引B+树，通过索引列查找时，先定位到B+树的叶子节点，再通过指针定位到行记录

**二、InnoDB的索引**

InnoDB的主键索引与行记录是存储在一起的，故叫做聚集索引（Clustered Index）：
* 没有单独区域存储行记录
* 主键索引的叶子节点，存储主键，与对应行记录

因为这个特性，InnoDB的表必须要有聚集索引：
1. 如果表定义了PK，则PK就是聚集索引
2. 如果表没有定义PK，则第一个非空unique列是聚集索引
3. 否则，InnoDB会创建一个隐藏的row-id作为聚集索引

聚集索引，也只能够有一个，因为数据行在物理磁盘上只能有一份聚集存储。

InnoDB的普通索引可以有多个，它与聚集索引是不同的：
* 普通索引的叶子节点，存储主键

**三、总结**
MyISAM和InnoDB都使用B+树来实现索引：
* MyISAM的索引与数据分开存储
* MyISAM的索引叶子存储指针，主键索引与普通索引无太大区别
* InnoDB的聚集索引和数据行统一存储
* InnoDB的聚集索引存储数据行本身，普通索引存储主键
* InnoDB一定有且只有一个聚集索引
* InnoDB建议使用趋势递增整数作为PK，而不宜使用较长的列作为PK
