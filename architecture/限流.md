## 一.限流算法
**令牌桶**

![](https://github.com/c-agam/notes/blob/master/images/%E4%BB%A4%E7%89%8C%E6%A1%B6.png)

令牌桶算法是一个存放固定容量令牌的桶，按照固定速率往桶里添加令牌，详述如下：
* 假设限制2r/s，则按照500毫秒的固定速率往桶中添加令牌
* 桶中最多存放b个令牌，当桶满时，新添加的令牌被丢弃或拒绝
* 当一个n个字节大小的数据包到达，将从桶中删除n个令牌，接着数据包被发送到网络上
* 如果桶中的令牌不足n个，则不会删除令牌，且该数据包将被限流（要么丢弃，要么缓冲区等待）
