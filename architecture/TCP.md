**一、3次握手**

![](https://github.com/c-agam/notes/blob/master/images/3%E6%AC%A1%E6%8F%A1%E6%89%8B.png)

**二、4次挥手**

![](https://github.com/c-agam/notes/blob/master/images/4%E6%AC%A1%E6%8C%A5%E6%89%8B.png)

**三、思考题**

**1、为什么要三次握手呢，有人说两次握手就好了？**

举例：已失效的连接请求报文段

**2、为什么是4次挥手呢？**

为了确保数据能够完成传输

**3、客户端突然挂掉了怎么办？**

正常连接时，客户端突然挂掉了，如果没有措施处理这种情况，那么就会出现客户端和服务器端出现长时期的空闲。解决办法是在服务器端设置保活计时器，每当服务器收到客户端的消息，就将计时器复位。超时时间通常设置为2小时。若服务器超过2小时没收到客户的信息，他就发送探测报文段。若发送了10个探测报文段，每一个相隔75秒，还没有响应就认为客户端出了故障，因而终止该连接。
